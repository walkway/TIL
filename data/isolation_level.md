# 트랜잭션의 격리 수준(isolation)

- 동시에 여러 트랜잭션이 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있도록 허용할지 말지를 결정
````
READ UNCOMMITTED
READ COMMITTED
REPEATABLE READ
SERIALIZABLE
````

## READ UNCOMMITTED
- 각 트랜잭션에서의 변경 내용이 COMMIT이나 ROLLBACK 여부에 상관 없이 다른 트랜잭션에서 값을 읽을 수 있다.
- DIRTY READ: 트랜잭션이 작업이 완료되지 않았지만, 다른 트랜잭션에서 볼 수 있게 되는 현상
- 정합성에 문제가 많은 격리 수준이기 때문에 사용하지 않는 것을 권장한다.
- 문제 상황
````
A 트랜잭션에서 1번 값을 10에서 20으로 변경
아직 커밋하지 않음
B 트랜잭션에서 1번 조회
20 값 조회 -> 더티 리드(Dirty Read)
A 트랜잭션에서 문제가 발생해 ROLLBACK함
B 트랜잭션은 1번이 20으로 알고 있음
````
## READ COMMITTED
- 트랜잭션-1이 Commit한 이후 아직 끝나지 않는 트랜잭션-2가 다시 테이블 값을 읽으면 값이 변경될 수 있다.
- 어떠한 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 해당 데이터(B)에 접근할 수 없다.

## REPEATABLE READ
- MySQL에서는 트랜잭션마다 트랜잭션 ID를 부여하여 트랜잭션 ID보다 작은 트랜잭션 번호에서 변경한 것만 읽게 된다.
- 트랜잭션이 시작되기 전에 커밋된 내용에 대해서만 조회할 수 있는 격리수준
- 트랜잭션이 완료될 때까지 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능하다.
  - Select col1 from A where 을 수행하였고 이 조건에 해당하는 데이터가 2건이 있는 경우(col1=1과 5)
  - 다른 사용자가 col1이 1이나 5인 Row에 대한 UPDATE이 불가능
  - 하지만, 이 조건에 해당하는 Row를 INSERT하는 것은 가능 -> 동일 트랜잭션에서 Read되는 데이터 수가 달라질 수 있다.
  - Select col1 from A where 을 수행하였고 이 조건에 해당하는 데이터가 2건이 있는 경우(col1=1과 5)다른 사용자가 col1이 1이나 5인 Row에 대한 UPDATE이 불가능합니다. 하지만, 이 조건에 해당하는 Row를 INSERT하는 것은 가능합니다. 따라서 동일 트랜잭션에서 Read되는 데이터 수가 달라질 수 있습니다.
