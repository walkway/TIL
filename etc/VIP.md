# VIP
- 가상 아이피 Virtual IP
- VIP는 하나의 호스트에 여러 개의 IP주소를 할당하는 기술 
- 하나의 네트워크 인터페이스에 여러 개의 IP 주소를 줄 수 있다.
- 이중화나 여러 대의 서버를 나누기 위함
- 일반적으로 웹서버는 L4가 대표 아이피를 가진다.
- DB 서버의 경우엔, 각 서버가 가상아이피를 갖도록 한다.
₩₩₩₩
외부 네트워크
|
|
라우터(1.1.1.1)
|
|
|----- DNS(1.1.1.2)
|
|
스위치(1.1.1.3)
|
|
-------------------------------------------------------------------------------------------
|                 |               |               |               |                 |
서버1         서버2        서버3          서버4         서버5           서버6
1.1.1.4       1.1.1.5      1.1.1.6         1.1.1.7        1.1.1.8         1.1.1.9
₩₩₩₩

- 서버1 ~ 서버6은 모두 같은 역할을 하는 서버, 로드밸런싱
- 외부로부터 웹서버를 이용하려는 사용자가 접속한다.
- DNS는 웹서버의 IP를 알려준다. DNS에는 '고정된 정보'가 들어가 있다. (웹서버IP = X.X.X.X)
- DNS는 스위치 1.1.1.3 를 알려준다.
- 스위치에서 6대의 서버 중 알맞은 서버로 연결해 준다. 

### HA에서의 VIP 사용
- 중요 서비스의 경우에는 하나의 웹 서버에 문제가 생기더라도 웹 서비스에는 문제가 없어야 한다.
- 두대의 호스트를 Active - Standby 형태의 HA를 구현한다.
- 이 두 호스트는 heatbeat 소프트웨어를 이용해서 서로의 상태를 확인한다. 그러다가 Active 호스트에 어떤 문제가 생기면 standby가 문제가 생긴 호스트를 대신해서 Active 호스트가 되고, 서비스를 계속한다.
- HA구성에서 원할한 웹 서비스를 위해서는 두 호스트가 동일한 IP를 가지고 있어야 한다 -> VIP