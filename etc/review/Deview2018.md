# Deview 2018

## 누구나 만드는 내 목소리 합성기
- 음성 합성: 인공적으로 사람의 음성을 만드는 것
- 텍스트에 존재하지 않는 발음, 속도, 호흡, 운율 등의 정보를 추정하여 녹음한 화자와 비슷한, 자연스러운 음성 생성
- nVoice 네이버 음성합성기, 한 화자 합성기를 만드는 과정
  - 화자 선정: 호감 목소리, 정확한 발음, 일관된 목소리
  - 발성 스크립트 선정: 서비스 도메인에 따라 내용과 분량 선정, 읽기 쉬운 스크립트, 모호한 발음은 미리 알려줌(ex 01:07 1대 7로 읽어주세요), 보강 어휘
  - 녹음: 높은 볼륨 vs 숨소리 (흡~ 습~), 노이즈 제거(60Hz 전원 노이즈 등), 좋은 녹음실과 훌륭한 사운드 엔지니어
  - 전사 Transcripttion 받아쓰기: 음소전사 실제 발음열, 각 음소별 음성 분할, 장르
  - 언어 처리 모듈 구현: Preprocess, Sentenct split ...
  - 운율 모델링: pitch, energy, duration(얼마나 길고 짧게 얘기할지)
  - 음소 접합: 자연스러운 합성 단위 찾기, 각 음소별로 꼭 붙어야 vs 떨어져도 상관 없는, 연결성 vs 추정값, 자연스러운 접합(PSOLA 등)

#### 개인화 음성 합성
- 짧은 시간 쉽게 녹음하여 개인의 특성을 살리는 자연스러운 음성 생성 -> 개인화 음성 합성
- 상용화된 개인화 서비스는 없나요?.. 현재 방법으로 어렵다.
- 그렇다면 어떻게 풀었을까: Statistical Parametric 방식, End to End, Vocoder, Speaker Adaptation
- End-to-End 모델로 Vocoder파라미터 추정. Speaker Adaptation 기법으로 모델 변환. Vocoder를 이용한 음성합성
- 1. Statistical Parametric
  - Concatenation 방식: 모든 음소 조합 샘플 존재해야 함 -> 적합 x
  - 음성을 분석하여 파라미터로 음성을 생성하는 Statistical Parametric 방식 사용
  - Voice UnVoice 성대가 울리는가 안울리는가
  - F0
  - LSF
  - BAP
- 2. end to end
  - 추가적인 정보없이 Waveform Text 로 음성 생성
- 3. Vocoder
  - Vocoder 파라미터를 추정하고, 음성 합성시 기존 방식의 Vocoder 사용
  - 잘못 추정된 파라미터에 의한 품질 저하 큼
- 4. Speaker Adaptation
  - 대량의 추가적인 음성 데이터 + 개인 적은 음성 데이터 사용 모델 구축
- NES: Natural End-to-End Speach Synthesis System. 
- test: 100문장 8분 데이터 -> Speaker Adaptation

#### 개선사항
- 품질 향상
- 전처리 기술 고도화
- 더 적은 데이터 사용
- 새로운 end to end  모델
- 새로운 adaptation방법
- voice conversion

## Search Reliability Engineering
- 대용량 트래픽을 1년 365일 무중단, 장애없이, low latency 보장하면서 운영하는 방법
- 시스템 상태 파악을 위해 새로운 가용량 지표 개발
- 경보 피로를 줄이는 anomaly detection 방법 연구
- SRE 문화 도입
- 네이버 검색 시스템 목표: 대용량 처리, 짧은 대기 시간 -> 장애가 일어나지 않는 것이 중요. 평소에 잘 대비하는 것이 효율적
- 비용 효율 증명: 정확한 비용 측정, 예측의 중요성
- 증명: 정확하고 구체적인 경보 체계 확립, 정확한 사후 분석
- 거대 시스템에서 문제의 핀포인트 추적, 영향 범위 확정, 장애 복구 후 정상화 확인 어려움
- SRE: Site Reliability Engineering
  - 글로벌 스케일의 서비스를 제공하면서 어떻게 하면 시스템의 신뢰성을 보장할지 고민하는 기술 분야, 방법론, 문화
- 네이버에서 SRE: Search Reliability Engineering
  - 모든 검색 서비스 정상 동작, 1면 10분 이하 다운 타임, 저비용 사전 예방 > 고비용 사후처리
- SRE 도입 전: 시스템 운영 지표 관측(검색 요청 트래픽, 서버 응답시간, CPU 사용량 ...) -> 전체를 확인할 방법 없음. 각 계층별로 ID가 통일되어있지 않았음.
- 효율적인 정보 체계 도입: 서비스 ID 발급 -> 구조 가시화 -> 성능 비용 측정 -> 가용량 지표 개발
- 새로운 가용량 지표 활용: 임계 상황 판단, 가용량 경보 발생 시 미리 경보
  - 가용량 경보 시스템 운영: 임계 상황 발생 횟수 감소 
- 대시 보드 개발: 성능 비용 정보, 가용량 정보 계층별 취합
- 새로운 지표 개발 -> 관제 범위 확대 -> 시스템 개발 -> 새로운 방법론 개발 (반복)
- 하지만.. 경보 횟수가 지나치게 많아지는 상황 -> 경보 피로 -> 줄이는 방법
- 경보 분석: ex 시간이 지나면 정상화 되는 상황 -> 거짓 경보
  - 경험치, 휴리스틱: 개인차 존재
  - 경보 분석 자동화: 모든 경우 대응 자동화 x, 빠른 대응을 위해 필요한 데이터 모아주기, 빠른 의사 결정을 위해 필요한 상황 판단 자동화 o
  - 그래프 모양: 패턴 매칭 -> 상황 판단
  - 지표 데이터 유사도
- 문제 분석 관점 - Macro Analysis: 각 서비스 내부 변화 집중 파악 -> SRE 분석 영역. 외부요인 합해서 종합적 분석
- 엔지니어와 시스템: 안정적인 사람이 만들고 운영하는 안정적인 시스템
  - SRE 시스템이 안정적으로 돌아가는 모든 활동
  - 개발자, 엔지니어 심리적, 정신적 안도감도 시스템 Reliability에 영향을 준다.
- 365일 24시간 대응 어려움. 2가지 역할 정의
  - IC(Incident Commander): 전체 Incident 통제, 상황 판단 의사 결정, 외부 대화
  - Scribe: 서기, 판단 필요 지표 수집, 상황 정리 기록, 전파
  - 역할 Rotation
  - 장애에 바로 대응하기 어려운 상황: Chatbot 사용
- 심리적 안정의 중요성, 각자 스트레스 처리 방법, 언제나 문제가 발생할 수 있다는 마음가짐
- SRE 문화: 비난 없는 사후 분석, 사실에 기반하여 분석