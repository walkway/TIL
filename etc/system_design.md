# System Design

## 데이터베이스 규모 확장 - 수평적 확장
- 샤딩, 더 많은 서버를 추가하여 성능을 향상 시킨다.
- 대규모 데이터베이스를 샤드 단위로 분할하는 기술이다.
  - 샤드는 같은 스키마를 쓰지만 샤드에 보관되는 데이터 사이 중복이 없다.
- 샤딩 키 = 파티션 키, 데이터가 어떻게 분산될지 정하는 하나 이상의 컬럼으로 구성
- 데이터의 재 샤딩
  - 재 샤디은 데이터가 너무 많아져서, 하나의 샤드로 감당하기 어려울 때
  - 샤드 간 데이터 분포가 균등하지 못하여 어떤 샤드에 할당된 공간 소모가 다른 샤드에 비해 빨리 진행 될 때(샤드 소진)
  - 샤드 키 계산 함수 변경하여 데이터 재 배치
- celebrity 문제
  - hotspot key
  - 특정 샤드에 질의가 집중되어 서버에 과부하가 걸리는 문제
- 조인과 비정규화
  - 여러 샤드에 걸친 데이터를 조인하기 힘들어진다.
  - 데이터베이스를 비정규화하여 하나의 테이블에서 질의가 수행될 수 있도록 한다.

참고: 대규모 시스템 설계 기초  
